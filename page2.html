<html>
  <script src='https://d3js.org/d3.v5.min.js'></script>
 
  <style>
	body {background: #D1E4B6;}
	h1   {color: black;}
	svg    {border-radius: 25px; background: #73AD21; padding: 20px;}
	rect {fill: white; stroke: black; }
  </style>
  <body>
	  <p>
    <input type="submit" onClick="myFunctionP1()"/>
	  <script>
		  function myFunctionP1() {
			  window.location.href="https://skel700.github.io/data-vis-final";
		  }
	  </script>
	  </p>
	</body>
  <body onload='init()'>
    <svg width=300 height=300></svg>

    <script>
	    xs = d3.scaleBand().domain([2018,2019, 2020]).range([0, 200])
	    ys = d3.scaleLinear().domain([0.0084, 0.0088]).range([200, 0])
	    
	    
    async function init(){
    	data = d3.csv("/data-vis-final/last_three_years.csv")
			.then(function(data) {

		const annot= [ { note:{label: "If the number of reports is increasing, why would the average percent increase from the previous year decrease?", title: "Discrepancy"}, x: 100, y:150, dy: 75, dx:150}]
		const makeAnnot = d3.annotation().annotations(annot)

		d3.select("svg").append("g").attr("transform", "translate(50,50)").selectAll("dot").data(data).enter().append("circle").attr("cx", function(d) {return xs(d.Year)+33;}).attr("cy", function(d) {return ys(d.Average_of_Percentage_Increase);}).attr("r", 2)
		d3.select("svg").select("g").append("path").datum(data).attr("fill", "none").attr("stroke", "#0b1210").attr("stroke-width", 1.5).attr("d", d3.line().x(function (d) {return xs(d.Year)+33}).y(function(d) {return ys(d.Average_of_Percentage_Increase)}))
		d3.select("svg").select("g").call(makeAnnot)
		
		d3.select("svg").append("g").attr("transform", "translate(50,50)").call(d3.axisLeft(ys));
		d3.select("svg").append("g").attr("transform", "translate(50,250)").call(d3.axisBottom(xs));
		
		
	});
    }
    </script>
  </body>
</html>
